{% extends "timesheets/base.html" %}
{% block title %}Timesheet History - Espanini{% endblock %}

{% block content %}
<style>
    /* Ensure header and body tables share equal widths */
.table100-head table,
.table100-body table {
  width: 100%;
  table-layout: fixed; /* force equal-width columns */
  border-collapse: collapse;
}





/* Make "Signed" column (last one) a bit wider */
.table100-head th.cell100.column6,
.table100-body td.cell100.column6 {
  width: 18%;
}


.table100-head th.cell100.column5,
.table100-body td.cell100.column5 {
  width: 10%;
}

.table100-head th.cell100.column2,
.table100-body td.cell100.column2 {
  width: 12%;
}

.table100-head th.cell100.column3,
.table100-body td.cell100.column3 {
  width: 12%;
}

.table100.ver2 .table100-head {
  box-shadow: 0 5px 20px 0px rgba(0, 0, 0, 0.1);
  -moz-box-shadow: 0 5px 20px 0px rgba(0, 0, 0, 0.1);
  -webkit-box-shadow: 0 5px 20px 0px rgba(0, 0, 0, 0.1);
  -o-box-shadow: 0 5px 20px 0px rgba(0, 0, 0, 0.1);
  -ms-box-shadow: 0 5px 20px 0px rgba(0, 0, 0, 0.1);
}

.table100.ver2 th {

  font-size: 18px;
  color: #fa4251;
  line-height: 1.4;

  background-color: transparent;
}

.table100.ver2 td {
  font-family: Lato-Regular;
  font-size: 15px;
  color: #808080;
  line-height: 1.4;
}

.table100.ver2 .table100-body tr {
  border-bottom: 1px solid #f2f2f2;
}

/*---------------------------------------------*/

.table100.ver2 {
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 0px 40px 0px rgba(0, 0, 0, 0.15);
  -moz-box-shadow: 0 0px 40px 0px rgba(0, 0, 0, 0.15);
  -webkit-box-shadow: 0 0px 40px 0px rgba(0, 0, 0, 0.15);
  -o-box-shadow: 0 0px 40px 0px rgba(0, 0, 0, 0.15);
  -ms-box-shadow: 0 0px 40px 0px rgba(0, 0, 0, 0.15);
}

.table100.ver2 .ps__rail-y {
  right: 5px;
}

.table100.ver2 .ps__rail-y::before {
  background-color: #ebebeb;
}

.table100.ver2 .ps__rail-y .ps__thumb-y::before {
  background-color: #cccccc;
}


/* Optional hover style */
.table100-body tr:hover td {
  background-color: rgba(0, 0, 0, 0.05);
}



/* Optional: smooth scrollbar */
.container-table100::-webkit-scrollbar {
  height: 8px;
}
.container-table100::-webkit-scrollbar-thumb {
  background: #bbb;
  border-radius: 10px;
}
.container-table100::-webkit-scrollbar-thumb:hover {
  background: #888;
}

@media (max-width: 768px) {
  /* Ensure outer container stretches to full screen */
  .container-table100,
  .wrap-table100,
  .table100 {
    width: 100% !important;
    min-width: 100% !important;
    margin: 0 !important;
    border-radius: 0; /* optional: edge-to-edge look */
  }

  /* Make the table slightly wider so horizontal scroll works */
  .table100-head table,
  .table100-body table {
    width: 120%;
  }

  /* Smaller font and padding for compact layout */
  .table100-head th.cell100,
  .table100-body td.cell100 {
    font-size: 10px;
    padding: 8px 10px;
  }

  /* Adjust specific columns for better balance */
  .table100-head th.cell100.column1,
  .table100-body td.cell100.column1 {
    width: 18%;
  }

  .table100-head th.cell100.column6,
  .table100-body td.cell100.column6 {
    width: 25%; /* Signed column gets more space */
    white-space: nowrap;
  }

  /* Add subtle scrollbar styling for mobile scroll */
  .container-table100::-webkit-scrollbar {
    height: 12px;
  }
  .container-table100::-webkit-scrollbar-thumb {
    background: #ccc;
    border-radius: 10px;
  }
}

/* Extra small screens */
@media (max-width: 480px) {
  .table100-head th.cell100,
  .table100-body td.cell100 {
    font-size: 5px;
    padding: 10px 10px;
  }

  .table100 {
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.8);
  }

  /* Slightly increase table width for smoother scrolling */
  .table100-head table,
  .table100-body table {
    width: 140%;
  }
}

    /* Align filters left without touching other d-flex layouts */
.row.mb-3 .d-flex {
  justify-content: flex-start !important;
}

    /* Force the filter form to align fully left */
.container-table100 .row.mb-3,
.container-table100 .row.mb-3 .d-flex {
  justify-content: flex-start !important;
  text-align: left !important;
}

.container-table100 form {
  margin-left: 0 !important;
  margin-right: auto !important;
  text-align: left !important;
}

    .row.mb-3 {
  background-color: #fff;
  border-radius: 10px;
  padding: 10px 15px;

}



</style>

<body>




    <div class="tittle wow fadeInUp text-center" style="visibility: visible; animation-name: fadeInUp;">
                        <h1 class="display-5">
    {{ employee }}
                        </h1>

                    </div>

    <!-- Display the current year and month if provided -->





    <div class="row mb-3">
    <div class="d-flex justify-content-start align-items-center">

    <!-- Filter Form -->
    <form method="get"  action="{% url 'all_employee_timesheets' employee.id employee.employee_id %}">
        <label for="year" style="color: black">Year:</label>
        <select id="year" name="year" onchange="this.form.submit()">
            <option value="">All</option>
            {% for y in years %}
            <option value="{{ y }}" {% if year == y|stringformat:"s" %}selected{% endif %}>
                {{ y }}
            </option>
            {% endfor %}
        </select>

        <label for="month" style="color: black">Month:</label>
        <select id="month" name="month" onchange="this.form.submit()">
            <option value="">All</option>
            {% for m in months %}
            <option value="{{ m }}" {% if month == m|stringformat:"s" %}selected{% endif %}>
                {{ m }}
            </option>
            {% endfor %}
        </select>
    </form>
    </div>
        </div>
<div class="container-table100">


			<div class="wrap-table100">
				<div class="table100 ver2 m-b-110">
					<div class="table100-head">
						<table>
							<thead>
								<tr class="row100 head">
									<th class="cell100 column1">Date</th>
									<th class="cell100 column2">Time In</th>
									<th class="cell100 column3">Time Out</th>
                                    <th class="cell100 column4">Hours Worked</th>
									<th class="cell100 column5">OT 1</th>
									<th class="cell100 column5">OT 2</th>
                                    <th class="cell100 column6">Signed</th>

								</tr>
							</thead>
						</table>
					</div>

					<div class="table100-body">
						<table>
							<tbody>
                             {% for timesheet in timesheets %}
                                <td class="cell100 column1"><a href="{% url 'edit_employee_timesheet' timesheet.id %}" class="text-decoration-none text-black">
                                    {{ timesheet.date }}
                            </a></td>
									<td class="cell100 column2">{{ timesheet.clock_in }}</td>
                                {% if timesheet.clock_out %}
									<td class="cell100 column3">{{ timesheet.clock_out }}</td>
                             {% else %}
                            <td class="cell100 column3">---</td>
                            {% endif %}
                                    {% if timesheet.hours_worked %}
                                    <td class="cell100 column4">{{ timesheet.hours_worked }}</td>
                                     {% else %}
                            <td class="cell100 column4">---</td>
                            {% endif %}
                            {% if timesheet.hours_worked %}
                                          <td class="cell100 column5">
          {{ timesheet.overtime_normal_saturdays }}
                             </td>
                             {% else %}
                            <td class="cell100 column5">---</td>
                             {% endif %}
                             {% if timesheet.hours_worked %}
                             <td class="cell100 column5">{{ timesheet.overtime_holiday_sundays }}</td>
                              {% else %}
                            <td class="cell100 column5">---</td>
                             {% endif %}
                             {% if timesheet.signed_off_by %}

                             <td class="cell100 column6">{{ timesheet.signed_off_by }}</td>
                             {% else %}
                            <td class="cell100 column6">---</td>
                            {% endif %}
								</tr>


								{% endfor %}
							</tbody>
						</table>
					<div class="ps__rail-x" style="left: 0px; bottom: -581px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 581px; height: 585px; right: 5px;"><div class="ps__thumb-y" tabindex="0" style="top: 292px; height: 293px;"></div></div></div>
				</div>
                </tbody>
						</table>
					<div class="ps__rail-x" style="left: 0px; bottom: 0px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 0px; height: 585px; right: 0px;"><div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 291px;"></div></div></div>
				</div>
			</div>
		</div>
</div>

</body>
{% endblock %}

