{% extends "timesheets/base.html" %}
{% block title %}Employees - Espanini{% endblock %}

{% block content %}

<style>
/* Optional: smooth scrollbar */
.container-table100::-webkit-scrollbar {
  height: 8px;
}
.container-table100::-webkit-scrollbar-thumb {
  background: #bbb;
  border-radius: 10px;
}
.container-table100::-webkit-scrollbar-thumb:hover {
  background: #888;
}

@media (max-width: 768px) {
  /* Ensure outer container stretches to full screen */
  .container-table100,
  .wrap-table100,
  .table100 {
    width: 100% !important;
    min-width: 100% !important;
    margin: 0 !important;
    border-radius: 0; /* optional: edge-to-edge look */
  }

  /* Make the table slightly wider so horizontal scroll works */
  .table100-head table,
  .table100-body table {
    width: 120%;
  }

  /* Smaller font and padding for compact layout */
  .table100-head th.cell100,
  .table100-body td.cell100 {
    font-size: 10px;
    padding: 8px 10px;
  }

   .table100-head th.cell100.column6,
  .table100-body td.cell100.column6 {
    width: 25%; /* Signed column gets more space */
    white-space: nowrap;
  }

  /* Adjust specific columns for better balance */
  .table100-head th.cell100.column1,
  .table100-body td.cell100.column1 {
    width: 18%;
  }
    /* Extra small screens */
@media (max-width: 480px) {
  .table100-head th.cell100,
  .table100-body td.cell100 {
    font-size: 5px;
    padding: 10px 10px;
  }
</style>
<div class="container-fluid">











		<div class="container-table100">
			<div class="wrap-table100">

                <h3 class="text-center display-5">Employees</h3>
                <div class="row mb-3">
  <div class="d-flex justify-content-between align-items-center">
    <form method="get" action="{% url 'employees' %}" class="d-flex align-items-center mb-0">
      <label for="site" class="me-2 mb-0 fw-semibold">Site:</label>
      <select id="site" name="site" class=" form-select-sm" style="width: auto;" onchange="this.form.submit()">
        <option value="">All</option>
        {% for site in sites %}
        <option value="{{ site.site_id }}" {% if selected_site == site.site_id|stringformat:"s" %}selected{% endif %}>
          {{ site }}
        </option>
        {% endfor %}
      </select>
    </form>

    <div class="search-bar" style="width: 250px;">
      <input type="text" id="searchInput" class="form-control" placeholder="Search for employees...">
    </div>
  </div>
</div>


				<div class="table100 ver1 m-b-110">
					<div class="table100-head">
						<table>
							<thead>
								<tr class="row100 head">
									<th class="cell100 column1">EMP No.</th>
									<th class="cell100 column2">First Name</th>
									<th class="cell100 column3">Last Name</th>
									<th class="cell100 column4">Site</th>
									<th class="cell100 column5">Connected</th>
                                    <th class="cell100 column6"></th>

								</tr>
							</thead>
						</table>
					</div>

					<div class="table100-body">
						<table>
							<tbody>
                             {% for employee in employees %}
                                <tr class="row100 body">
                                    <td class="cell100 column1">
                                    <a href="{% url 'view_employee' employee.id %}" class="text-decoration-none text-black">
									{{ employee.employee_id }}
                                        </a></td>
									<td class="cell100 column2">{{ employee.first_name }}</td>
									<td class="cell100 column3">{{ employee.last_name }}</td>

                                    <td class="cell100 column4">
          {% if employee.site == "Unknown" %}
            <span class="text-danger">{{ employee.site }}</span>
          {% else %}
            {{ employee.site }}
          {% endif %}
        </td>

                                          <td class="cell100 column5">
          {% if employee.connected %}
            <img style="height: 20px; width: 20px " src="https://cdn2.iconfinder.com/data/icons/greenline/512/check-512.png">
          {% else %}
            <img style="height: 20px; width: 20px " src="https://cdn0.iconfinder.com/data/icons/pinpoint-action/48/error-outline-1024.png">
          {% endif %}
        </td>
                                    <td class="cell100 column6">

          <a href="{% url 'edit_employee' employee.id %}" class="btn btn-sm btn-warning">Edit</a>
        </td>
								</tr>


								{% endfor %}
							</tbody>
						</table>
					<div class="ps__rail-x" style="left: 0px; bottom: -581px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 581px; height: 585px; right: 5px;"><div class="ps__thumb-y" tabindex="0" style="top: 292px; height: 293px;"></div></div></div>
				</div>
                </tbody>
                <a href="{% url 'add_employee' %}" class="btn btn-sm btn-outline-primary float-end mb-3">Add Employee
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
         class="bi bi-plus" viewBox="0 0 16 16">
      <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
    </svg>
  </a>
						</table>
					<div class="ps__rail-x" style="left: 0px; bottom: 0px;"><div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div></div><div class="ps__rail-y" style="top: 0px; height: 585px; right: 0px;"><div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 291px;"></div></div></div>
				</div>
			</div>
		</div>
	</div>




<script>
document.addEventListener("DOMContentLoaded", function() {
  const searchInput = document.getElementById('searchInput');
  const employeeRows = document.querySelectorAll('tbody tr');

  searchInput.addEventListener('keyup', function() {
    const filter = searchInput.value.toLowerCase();
    employeeRows.forEach(row => {
      const rowText = row.textContent.toLowerCase();
      row.style.display = rowText.includes(filter) ? '' : 'none';
    });
  });
});
</script>
{% endblock %}
